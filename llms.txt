# theftdlc

[![CRAN
version](https://www.r-pkg.org/badges/version/theftdlc)](https://www.r-pkg.org/pkg/theftdlc)
[![CRAN RStudio mirror
downloads](https://cranlogs.r-pkg.org/badges/theftdlc)](https://www.r-pkg.org/pkg/theftdlc)

Analyse and Interpret Time Series Features

## Installation

You can install the stable version of `theftdlc` from CRAN:

``` r
install.packages("theftdlc")
```

You can install the development version of `theftdlc` from GitHub using
the following:

``` r
devtools::install_github("hendersontrent/theftdlc")
```

## General purpose

The [`theft`](https://hendersontrent.github.io/theft/) package for R
facilitates user-friendly access to a structured analytical workflow for
the extraction of time-series features from seven different feature sets
(and any number of individual user-supplied features): `"catch22"`,
`"feasts"`, `"kats"`, `"tsfeatures"`, `"tsfresh"`, `"tsfel"`, and
`"hctsa"`.

`theftdlc` extends this feature-based ecosystem by providing a suite of
functions for analysing, interpreting, and visualising time-series
features calculated using `theft`. Functionality including data quality
assessments and normalisation methods, low dimensional projections
(linear and nonlinear), data matrix and feature distribution
visualisations, time-series classification machine learning procedures,
statistical hypothesis testing, and various other statistical and
graphical tools.

![Hex stickers of the theft and theftdlc packages for
R](reference/figures/theft-packages.png)

A high-level overview of how the `theft` ecosystem for R is typically
accessed by users is shown below. Many more functions and options for
customisation are available within the packages.

![Schematic of the theft ecosystem in
R](reference/figures/workflow-graphic_ecosystem-final.png)

### What’s in a name?

`theftdlc` means ‘downloadable content’ (DLC) for `theft`—just like you
get
[DLCs](https://en.bandainamcoent.eu/elden-ring/elden-ring/shadow-of-the-erdtree)
for video games.

## Quick tour

`theft` and `theftdlc` combine to create an intuitive and efficient tidy
feature-based workflow. Here is an example of a single code chunk that
calculates features using
[`catch22`](https://github.com/hendersontrent/Rcatch22) and a custom set
of mean and standard deviation, and projects the feature space into an
interpretable two-dimensional space using principal components analysis:

``` r
library(dplyr)
library(theft)
library(theftdlc)

calculate_features(data = theft::simData, 
                   feature_set = "catch22",
                   features = list("mean" = mean, "sd" = sd)) %>%
  project(norm_method = "RobustSigmoid",
          unit_int = TRUE,
          low_dim_method = "PCA") %>%
  plot()
```

![](README_files/figure-gfm/unnamed-chunk-4-1.png)

In that example, `calculate_features` comes from `theft`, while
`project` and the `plot` generic come from `theftdlc`.

Similarly, we can perform time-series classification using a similar
simple workflow to compare the performance of `catch22` against our
custom set of the first two moments of the distribution:

``` r
calculate_features(data = theft::simData, 
                   feature_set = "catch22",
                   features = list("mean" = mean, "sd" = sd)) %>%
  classify(by_set = TRUE,
           n_resamples = 5,
           use_null = TRUE) %>%
  compare_features(by_set = TRUE,
                   hypothesis = "null") %>%
  head()
```

``` R
           hypothesis feature_set   metric  set_mean  null_mean t_statistic
1    User != own null        User accuracy 0.5466667 0.09333333    3.631296
2 catch22 != own null     catch22 accuracy 0.7377778 0.15111111    5.794157
      p.value
1 0.011067234
2 0.002205415
```

In this example, `classify` and `compare_features` come from `theftdlc`.

Please see the vignette for more information and the full functionality
of both packages.

## Citation

If you use `theft` or `theftdlc` in your own work, please cite both the
paper:

T. Henderson and Ben D. Fulcher. [“Feature-Based Time-Series Analysis in
R using the Theft
Ecosystem”](https://journal.r-project.org/articles/RJ-2025-023/), The R
Journal, 2025.

BibTeX version:

``` R
@article{RJ-2025-023,
  author = {Henderson, Trent and Fulcher, Ben D.},
  title = {Feature-Based Time-Series Analysis in R using the Theft Ecosystem},
  journal = {The R Journal},
  year = {2025},
  note = {https://doi.org/10.32614/RJ-2025-023},
  doi = {10.32614/RJ-2025-023},
  volume = {17},
  issue = {3},
  issn = {2073-4859},
  pages = {43-68}
}
```

and the software:

``` R
To cite package 'theft' in publications use:

  Henderson T (2025). _theft: Tools for Handling Extraction of Features
  from Time Series_. R package version 0.8.3,
  <https://hendersontrent.github.io/theft/>.

A BibTeX entry for LaTeX users is

  @Manual{,
    title = {theft: Tools for Handling Extraction of Features from Time Series},
    author = {Trent Henderson},
    year = {2025},
    note = {R package version 0.8.3},
    url = {https://hendersontrent.github.io/theft/},
  }

To cite package 'theftdlc' in publications use:

  Henderson T (2025). _theftdlc: Analyse and Interpret Time Series
  Features_. R package version 0.2.2,
  <https://hendersontrent.github.io/theftdlc/>.

A BibTeX entry for LaTeX users is

  @Manual{,
    title = {theftdlc: Analyse and Interpret Time Series Features},
    author = {Trent Henderson},
    year = {2025},
    note = {R package version 0.2.2},
    url = {https://hendersontrent.github.io/theftdlc/},
  }
```

# Package index

## All functions

- [`classify()`](https://hendersontrent.github.io/theftdlc/reference/classify.md)
  [`tsfeature_classifier()`](https://hendersontrent.github.io/theftdlc/reference/classify.md)
  : Fit classifiers using time-series features using a resample-based
  approach and get a fast understanding of performance
- [`cluster()`](https://hendersontrent.github.io/theftdlc/reference/cluster.md)
  : Perform cluster analysis of time series using their feature vectors
- [`compare_features()`](https://hendersontrent.github.io/theftdlc/reference/compare_features.md)
  : Conduct statistical testing on time-series feature classification
  performance to identify top features or compare entire sets
- [`filter_duplicates()`](https://hendersontrent.github.io/theftdlc/reference/filter_duplicates.md)
  : Remove duplicate features that exist in multiple feature sets and
  retain a reproducible random selection of one of them
- [`filter_good_features()`](https://hendersontrent.github.io/theftdlc/reference/filter_good_features.md)
  : Filter resample data sets according to good feature list
- [`find_good_features()`](https://hendersontrent.github.io/theftdlc/reference/find_good_features.md)
  : Helper function to find features in both train and test set that are
  "good"
- [`fit_models()`](https://hendersontrent.github.io/theftdlc/reference/fit_models.md)
  : Fit classification model and compute key metrics
- [`get_rescale_vals()`](https://hendersontrent.github.io/theftdlc/reference/get_rescale_vals.md)
  : Calculate central tendency and spread values for all numeric columns
  in a dataset
- [`interval()`](https://hendersontrent.github.io/theftdlc/reference/interval.md)
  [`calculate_interval()`](https://hendersontrent.github.io/theftdlc/reference/interval.md)
  : Calculate interval summaries with a measure of central tendency of
  classification results
- [`make_title()`](https://hendersontrent.github.io/theftdlc/reference/make_title.md)
  : Helper function for converting to title case
- [`plot(`*`<feature_calculations>`*`)`](https://hendersontrent.github.io/theftdlc/reference/plot.feature_calculations.md)
  : Produce a plot for a feature_calculations object
- [`plot(`*`<feature_projection>`*`)`](https://hendersontrent.github.io/theftdlc/reference/plot.feature_projection.md)
  : Produce a plot for a feature_projection object
- [`plot(`*`<interval_calculations>`*`)`](https://hendersontrent.github.io/theftdlc/reference/plot.interval_calculations.md)
  : Produce a plot for a interval_calculations object
- [`project()`](https://hendersontrent.github.io/theftdlc/reference/project.md)
  [`reduce_dims()`](https://hendersontrent.github.io/theftdlc/reference/project.md)
  : Project a feature matrix into a two-dimensional representation using
  PCA, MDS, t-SNE, or UMAP ready for plotting
- [`resample_data()`](https://hendersontrent.github.io/theftdlc/reference/resample_data.md)
  : Helper function to create a resampled dataset
- [`rescale_zscore()`](https://hendersontrent.github.io/theftdlc/reference/rescale_zscore.md)
  : Calculate z-score for all columns in a dataset using train set
  central tendency and spread
- [`select_stat_cols()`](https://hendersontrent.github.io/theftdlc/reference/select_stat_cols.md)
  : Helper function to select only the relevant columns for statistical
  testing
- [`shrink()`](https://hendersontrent.github.io/theftdlc/reference/shrink.md)
  : Use a cross validated penalized maximum likelihood generalized
  linear model to perform feature selection
- [`stat_test()`](https://hendersontrent.github.io/theftdlc/reference/stat_test.md)
  : Calculate p-values for feature sets or features relative to an
  empirical null or each other using resampled t-tests
- [`theftdlc`](https://hendersontrent.github.io/theftdlc/reference/theftdlc.md)
  : Analyse and Interpret Time Series Features

# Articles

### All vignettes

- [Introduction to
  theftdlc](https://hendersontrent.github.io/theftdlc/articles/theftdlc.md):
